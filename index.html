<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>2D Maze Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #0b0b14;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: monospace;
  color: white;
}

#ui {
  position: fixed;
  top: 10px;
  text-align: center;
  width: 100%;
  color: #00ffff;
}

canvas {
  background: #111;
  border: 4px solid #00ffff;
}
</style>
</head>

<body>

<div id="ui">
  Level: <span id="level">1</span> |
  Coins: <span id="coins">0</span>
</div>

<canvas id="game" width="500" height="500"></canvas>

<script>
/* ================= BASIC SETUP ================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let level = 1;
let gridSize = 10;
let tileSize = canvas.width / gridSize;
let maze = [];
let coins = [];
let collected = 0;

/* ================= PLAYER ================= */
const player = {
  x: 0,
  y: 0,
  size: 0.6
};

/* ================= MAZE GENERATION ================= */
function generateMaze() {
  maze = [];
  coins = [];
  collected = 0;

  for (let y = 0; y < gridSize; y++) {
    maze[y] = [];
    for (let x = 0; x < gridSize; x++) {
      maze[y][x] = Math.random() > 0.7 ? 1 : 0;
    }
  }

  maze[0][0] = 0;

  // Coins
  for (let i = 0; i < gridSize; i++) {
    coins.push({
      x: Math.floor(Math.random() * gridSize),
      y: Math.floor(Math.random() * gridSize),
      taken: false
    });
  }

  player.x = 0;
  player.y = 0;

  document.getElementById("coins").textContent = collected;
  document.getElementById("level").textContent = level;
}

/* ================= DRAW ================= */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Maze
  for (let y = 0; y < gridSize; y++) {
    for (let x = 0; x < gridSize; x++) {
      if (maze[y][x] === 1) {
        ctx.fillStyle = "#3b82f6";
        ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);
      }
    }
  }

  // Coins
  coins.forEach(c => {
    if (!c.taken) {
      ctx.fillStyle = "#facc15";
      ctx.beginPath();
      ctx.arc(
        c.x * tileSize + tileSize / 2,
        c.y * tileSize + tileSize / 2,
        tileSize * 0.25,
        0,
        Math.PI * 2
      );
      ctx.fill();
    }
  });

  // Player
  ctx.fillStyle = "#22d3ee";
  ctx.fillRect(
    player.x * tileSize + tileSize * 0.2,
    player.y * tileSize + tileSize * 0.2,
    tileSize * player.size,
    tileSize * player.size
  );
}

/* ================= CONTROLS ================= */
const keys = {};
window.addEventListener("keydown", e => {
  keys[e.key.toLowerCase()] = true;
});
window.addEventListener("keyup", e => {
  keys[e.key.toLowerCase()] = false;
});

/* ================= GAME LOOP ================= */
function update() {
  let nx = player.x;
  let ny = player.y;

  if (keys["w"]) ny--;
  if (keys["s"]) ny++;
  if (keys["a"]) nx--;
  if (keys["d"]) nx++;

  if (
    nx >= 0 &&
    ny >= 0 &&
    nx < gridSize &&
    ny < gridSize &&
    maze[ny][nx] === 0
  ) {
    player.x = nx;
    player.y = ny;
  }

  // Collect coins
  coins.forEach(c => {
    if (!c.taken && c.x === player.x && c.y === player.y) {
      c.taken = true;
      collected++;
      document.getElementById("coins").textContent = collected;
    }
  });

  // Next level
  if (coins.every(c => c.taken)) {
    level++;
    gridSize += 2;
    tileSize = canvas.width / gridSize;
    generateMaze();
  }

  draw();
  requestAnimationFrame(update);
}

generateMaze();
update();
</script>

</body>
</html>
